language: cpp
matrix:
  fast_finish: true
  include:
    # The lines from "# BEGIN GENERATED" through "# END GENERATED" are
    # generated by running |python mk/update-travis-yml.py|. Any changes
    # made to those lines will be overwritten while other lines will be left
    # untouched.
    #
    # BEGIN GENERATED

    - env: TARGET=x86_64-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=DEBUG
      os: osx

    - env: TARGET=x86_64-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: osx

    - env: TARGET=x86-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=DEBUG
      os: osx

    - env: TARGET=x86-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: osx

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - yasm

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - yasm

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.9 USE_CXX=g++-4.9 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.9 USE_CXX=g++-4.9 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - yasm

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - yasm

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.9 USE_CXX=g++-4.9 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.9 USE_CXX=g++-4.9 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
            - yasm
          sources:
            - ubuntu-toolchain-r-test

    # END GENERATED

before_script:
  - export CC=$USE_CC CXX=$USE_CXX
  - $CC --version
  - $CXX --version
  - go version
  - make --version

script:
  - make -j2
  - make -j2 check
  # Verify nothing was added to source directory during build.
  - '! git clean --dry-run | grep ".*"'
  - make -j2 clean
  # Verify that |make clean| removed all files from the build directory.
  - '! find build -type f | grep ".+"'
